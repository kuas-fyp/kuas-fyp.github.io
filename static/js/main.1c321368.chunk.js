(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){e.exports=a.p+"static/media/logoWideBlue.f4883f42.png"},164:function(e,t,a){e.exports={container:"Departments_container__1c2dr",departmentItem:"Departments_departmentItem__Jlhyk"}},165:function(e,t,a){e.exports={container:"Community_container__2iFR1",scrollBtn:"Community_scrollBtn__Tpeyt"}},167:function(e,t,a){e.exports={container:"PendingAlumni_container__1LEsE",pendingAlumni:"PendingAlumni_pendingAlumni__1nyLM"}},222:function(e,t,a){e.exports=a.p+"static/media/logoWide.23236c51.png"},223:function(e,t,a){e.exports={container:"Alumni_container__3QRzE"}},229:function(e,t,a){e.exports={container:"HeadOfDepartments_container__1FhZX"}},235:function(e,t,a){e.exports={container:"Dashboard_container__2ruYS"}},236:function(e,t,a){e.exports=a.p+"static/media/alumni.8e7fc282.svg"},237:function(e,t,a){e.exports=a.p+"static/media/admin.fdb750b0.svg"},238:function(e,t,a){e.exports=a.p+"static/media/department.b43e383e.svg"},239:function(e,t,a){e.exports=a.p+"static/media/faculty.537860fa.svg"},241:function(e,t,a){e.exports=a.p+"static/media/logoB.06673761.png"},248:function(e,t,a){e.exports=a(462)},253:function(e,t,a){},383:function(e,t,a){},392:function(e,t,a){},403:function(e,t,a){},462:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),l=a.n(i),o=a(24),s=a(25),c=a(27),u=a(26),d=a(28),m=a(463),p=a(468),f=a(470),h=a(10),g=a(89),v=a(44),y=(a(253),{main:"#2B579A",light:"##3E6DB5",secondary:"#fafafa"}),E=a(83),b=a.n(E),S=a(35),k=a(20),O=a(23),C="https://6067j9uf3l.execute-api.us-east-1.amazonaws.com/test/",w=a(159),D=a.n(w),P=a(212),_=a.n(P)()(D.a,function(e){return D.a.put("".concat(C,"/user/refresh"),{refreshToken:localStorage.getItem("refreshToken")}).then(function(t){return localStorage.setItem("token",t.data.data.IdToken),e.response.config.headers.Authorization=t.data.data.IdToken,Promise.resolve()})},{statusCodes:[500]}),T=function(e,t,a,n,r){return new Promise(function(i,l){var o="",s={method:a,url:C+e};n||(o=localStorage.getItem("token")),"get"!==a&&(s.data=t),n||(s.headers={Authorization:o}),r&&(s.params=r),_(s).then(i,l)})},x={SET_USER_TOKEN:"SET_USER_TOKEN",SET_USER:"SET_USER",SET_AUTH_STATUS:"SET_AUTH_STATUS"},A=function(e){return{type:x.SET_USER,data:e}},j=function(e){return{type:x.SET_AUTH_STATUS,data:e}},N=function(){return function(e){localStorage.clear(),e({type:"LOGOUT"})}},I=function(e){localStorage.setItem("token",e.IdToken),localStorage.setItem("refreshToken",e.RefreshToken),localStorage.setItem("accessToken",e.AccessToken)},L=function(e,t,a){return function(n){T("auth/login",e,"post").then(function(e){var a,r=e.data;n((a=r.data.TokenContainer.IdToken,{type:x.SET_USER_TOKEN,data:a})),n(A(r.data.mongoDB[0])),I(r.data.TokenContainer),t()}).catch(a)}},U=function(e){return function(t){return T("auth/register",e,"post",!0)}},B=function(e){return function(t){return T("auth/changePassword",e,"post")}},M=function(e){return function(t){return T("auth/verify",e,"post")}},H=function(e){return function(t){return T("user/resendCode",e,"post")}},V=a(117),R=a.n(V),F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={login:!1,loginLoader:!1},a.handleSubmit=function(e){a.setState({loginLoader:!0}),e.preventDefault(),a.props.form.validateFields(function(e,t){e?a.setState({loginLoader:!1}):new Promise(function(e,n){a.props.signIn({username:t.userName,password:t.password},e,n)}).then(function(){a.setState({loginLoader:!1}),a.props.signedIn()},function(){a.props.form.resetFields(["password"]),a.setState({loginLoader:!1}),a.openNotification()})})},a.openNotification=function(){m.a.error({message:"Sorry, your email or password are incorrect - please try again."})},a.renderForm=function(){var e=a.props.form.getFieldDecorator;return r.a.createElement(p.a,{onSubmit:a.handleSubmit,className:"login-form"},r.a.createElement("img",{className:"medium",style:{display:"block",margin:30,userDrag:"none"},src:R.a,width:300,alt:"logo"}),r.a.createElement("h2",{className:"large h-font"},"Login to your account"),r.a.createElement(p.a.Item,null,e("userName",{rules:[{required:!0,message:"Please input your email!"}]})(r.a.createElement(f.a,{prefix:r.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),type:"email",autoFocus:!0,placeholder:"Email"}))),r.a.createElement(p.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(f.a,{prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(p.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(g.a,null,"Remember me")),r.a.createElement(v.a,{style:{background:y.main,color:y.secondary},type:"primary",htmlType:"submit",className:"login-form-button"},a.state.loginLoader?r.a.createElement(h.a,{type:"loading",style:{width:"38.3px"}}):"Log in"),r.a.createElement("span",{style:{textAlign:"center",display:"block"}},"Don't have an account?",r.a.createElement("span",{className:"highlightedLink",onClick:function(){return a.props.push("/register")}}," Register now!"))))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"desc large"},r.a.createElement("div",{className:"overlay"}),r.a.createElement("img",{src:b.a,width:220,alt:"logo",style:{zIndex:150}}),r.a.createElement("p",{style:{zIndex:150}},"Karachi University Alumni System (KUAS) is an online application system which can act as a interactive medium between the old student and the University of Karachi. KUAS is a web based application which helps the institutions to track old students and to track them for future endeavours.")),r.a.createElement("div",{className:"loginForm"},this.renderForm()))}}]),t}(n.Component),z=Object(O.c)(null,function(e){return Object(k.b)({push:S.d,signIn:L},e)})(p.a.create({name:"login"})(F)),Y=(a(382),a(383),a(122)),q=a(130),K=function(e){var t=e.component,a=e.auth,n=Object(q.a)(e,["component","auth"]);return r.a.createElement(Y.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(Y.a,{to:{pathname:"/",state:{from:e.location}}})}}))},X=a(123),W=a(15),G=a(101),J=a(472),Z=a(469),$=a(464),Q=(a(392),G.a.Option),ee=J.a.Step,te={labelCol:{xs:{span:24},sm:{span:8},md:{span:4}},wrapperCol:{xs:{span:24},sm:{span:16},md:{span:20}}},ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={current:0,codeValue:"",email:{value:""},fullName:{value:""},password:{value:""},rePassword:{value:""},enrollmentNo:{value:"",tip:'for eg. "SCI/DCS/EP-XXXXX/XXXX"'},nicNo:{value:"",tip:'13 digits (without dashes) "4210198765439"'},DOB:{value:"",tip:'DD/MM/YYYY for eg. "01/03/1997"'},gender:{value:void 0},registeringLoader:!1,verifyingCode:!1,verificationStatus:null},a.handleChange=function(e,t,n){a.setState(Object(X.a)({},n,Object(W.a)({},t(e.target.value),{value:e.target.value,tip:a.state[n].tip})))},a.formItem=function(e,t,a,n,i,l,o){return r.a.createElement(p.a.Item,Object.assign({required:l,label:e},te,{validateStatus:t.validateStatus,help:t.errorMsg||t.tip}),r.a.createElement(f.a,{value:t.value,type:a,onChange:n,placeholder:i,autoFocus:o}))},a.validateRePassword=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""!==e.trim()&&e===a.state.password.value?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:"Password does not match!"}},a.validationStatus=function(){switch(a.state.current){case 0:return a.checkFirstValidationStatus();case 1:return a.checkSecondValidationStatus()}},a.checkFirstValidationStatus=function(){var e=a.state,t=e.email,n=e.fullName,r=e.password,i=e.rePassword;return a.handleChange({target:{value:n.value}},a.validateFullName,"fullName"),a.handleChange({target:{value:t.value}},a.validateEmail,"email"),a.handleChange({target:{value:r.value}},a.validatePassword,"password"),a.handleChange({target:{value:i.value}},a.validateRePassword,"rePassword"),"success"===t.validateStatus&&"success"===n.validateStatus&&"success"===r.validateStatus&&"success"===i.validateStatus},a.checkSecondValidationStatus=function(){var e=a.state,t=e.DOB,n=e.enrollmentNo,r=e.nicNo,i=e.gender;return a.handleChange({target:{value:n.value}},a.validateEnrollment,"enrollmentNo"),a.handleChange({target:{value:r.value}},a.validateNIC,"nicNo"),a.setState({DOB:Object(W.a)({},a.validateDOB(t.value),{value:t.value,tip:'DD/MM/YYYY for eg. "01/03/1997"'})}),a.setState({gender:Object(W.a)({},a.validateGender(i.value),{value:i.value})}),"success"===n.validateStatus&&"success"===r.validateStatus&&"success"===t.validateStatus&&"success"===i.validateStatus},a.accountsForm=function(){var e=a.state,t=e.email,n=e.fullName,i=e.password,l=e.rePassword;return r.a.createElement(p.a,Object.assign({className:"form"},te),a.formItem("Full Name:",n,"text",function(e){return a.handleChange(e,a.validateFullName,"fullName")},"Enter your full name",!0,!0),a.formItem("Email:",t,"email",function(e){return a.handleChange(e,a.validateEmail,"email")},"Enter your email address",!0),a.formItem("Password:",i,"password",function(e){return a.handleChange(e,a.validatePassword,"password")},"Enter a password",!0),a.formItem("Password (Again):",l,"password",function(e){return a.handleChange(e,a.validateRePassword,"rePassword")},"Enter your password again",!0))},a.personalDetailsForm=function(){var e=a.state,t=e.enrollmentNo,n=e.nicNo,i=e.DOB,l=e.gender;return r.a.createElement(p.a,Object.assign({className:"form"},te),a.formItem("Enrollment No:",t,"text",function(e){return a.handleChange(e,a.validateEnrollment,"enrollmentNo")},"Enter your enrollment number",!0,!0),a.formItem("NIC no:",n,"number",function(e){return a.handleChange(e,a.validateNIC,"nicNo")},"Enter your NIC number",!0),r.a.createElement(p.a.Item,Object.assign({required:!0,label:"Date of Birth :"},te,{validateStatus:i.validateStatus,help:i.errorMsg||i.tip}),r.a.createElement(Z.a,{format:"DD/MM/YYYY",value:i.value,onChange:function(e){a.setState({DOB:Object(W.a)({},a.validateDOB(e),{value:e,tip:'DD/MM/YYYY for eg. "01/03/1997"'})})}})),r.a.createElement(p.a.Item,Object.assign({required:!0,label:"Gender :"},te,{validateStatus:l.validateStatus,help:l.errorMsg||l.tip}),r.a.createElement(G.a,{placeholder:"Select your gender",style:{width:170},optionFilterProp:"children",value:l.value,onChange:function(e){a.setState({gender:Object(W.a)({},a.validateGender(e),{value:e})})}},r.a.createElement(Q,{value:"male"},"Male"),r.a.createElement(Q,{value:"female"},"Female"),r.a.createElement(Q,{value:"other"},"Others"))))},a.verifyUserCode=function(){a.state.codeValue.trim()&&(a.setState({verifyingCode:!0}),a.props.verifyUserCode({id:a.state.registeredUser._id,code:+a.state.codeValue}).then(function(){$.a.success("Congratulation! your email has been verified!"),a.setState({verifyingCode:!1,verificationStatus:"verified"}),setTimeout(function(){window.location.replace("/")},1500)},function(){$.a.error("Incorrect verification code."),a.setState({verifyingCode:!1,verificationStatus:null})}))},a.lastConfirmationStep=function(){return r.a.createElement("div",{style:{textAlign:"center",height:300,paddingTop:"calc(300px - 185px)",boxSizing:"border-box",fontWeight:"bold"}},a.state.registeringLoader?r.a.createElement("div",null,r.a.createElement(h.a,{type:"loading"})," \xa0\xa0Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Check your email (",a.state.email.value,") for verification code."),r.a.createElement("div",{style:{maxWidth:350,margin:"20px auto",display:"flex"}},r.a.createElement(f.a,{disabled:a.state.verifyingCode,onPressEnter:a.verifyUserCode,value:a.state.codeValue,onChange:function(e){return a.setState({codeValue:e.target.value})},placeholder:"Enter Verification Code",type:"text"}),r.a.createElement(v.a,{onClick:a.verifyUserCode,disabled:"verified"===a.state.verificationStatus||a.state.verifyingCode,type:"primary",shape:"circle",icon:a.state.verificationStatus?"verified"===a.state.verificationStatus?"check":"arrow-right":a.state.verifyingCode?"loading":"arrow-right",style:{width:35,marginLeft:10,background:"verified"===a.state.verificationStatus?"greed":void 0}}))))},a.renderSteps=function(){var e=a.state.current;return r.a.createElement("div",{className:"stepsRegister"},r.a.createElement(J.a,{current:e},a.steps.map(function(e){return r.a.createElement(ee,{key:e.title,title:e.title})})),r.a.createElement("div",{className:"steps-content"},a.steps[e].content),r.a.createElement("div",{className:"steps-action"},r.a.createElement("div",null,e<a.steps.length-1&&r.a.createElement(v.a,{type:"primary",onClick:function(){a.validationStatus()?a.next():$.a.warn("Please resolve all errors!")}},"Next"),1===e&&r.a.createElement(v.a,{style:{marginLeft:8},onClick:function(){return a.prev()}},"Previous")),r.a.createElement("span",{style:{textAlign:"center",display:"block"}},"Already have an account?",r.a.createElement("span",{className:"highlightedLink",onClick:function(){return a.props.push("/")}}," Login here!"))))},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"validateFullName",value:function(){return""!==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim()?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:"Full Name is required!"}}},{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:"Please enter valid email address"}}},{key:"validatePassword",value:function(e){return/^(?=.*[0-9])[a-zA-Z0-9! @#$%^&*]{8,16}$/.test(String(e).toLowerCase())?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:"Password must contain min. 8 and max. 16 characters including at least an alphabet and a number"}}},{key:"validateEnrollment",value:function(e){return/^[A-Za-z]{3}\/[A-Za-z]{3}\/EP-[0-9]{3,7}\/[0-9]{4}/.test(String(e))?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:'Enrollment number is invalid "SCI/DCS/EP-XXXXX/XXXX"'}}},{key:"validateNIC",value:function(e){return/(^.{13,13})$/.test(String(e))?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:'13 digits (without dashes) "4210198765439"'}}},{key:"validateDOB",value:function(e){return e&&e._d?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:"Please enter date of birth"}}},{key:"validateGender",value:function(e){return e?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:"Please select your gender"}}},{key:"next",value:function(){var e=this,t=this.state.current+1;this.setState({current:t}),2===t&&(this.setState({registeringLoader:!0}),this.props.registerUser({username:this.state.fullName.value,password:this.state.password.value,email:this.state.email.value,enrollmentNo:this.state.enrollmentNo.value,DOB:this.state.DOB.value,gender:this.state.gender.value,nicNo:this.state.nicNo.value,role:"alumni"}).then(function(t){var a=t.data.data,n=a.mongoDB,r=a.TokenContainer,i=r.IdToken,l=r.AccessToken,o=r.RefreshToken;e.setState({registeredUser:n}),localStorage.setItem("token",i),localStorage.setItem("refreshToken",o),localStorage.setItem("accessToken",l),e.setState({registeringLoader:!1})},function(t){var a=t.response;e.setState({registeringLoader:!1}),$.a.error(a.data.message),e.prev()}))}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"render",value:function(){return this.steps=[{title:"Account",content:this.accountsForm()},{title:"Personal Details",content:this.personalDetailsForm()},{title:"Confirmation",content:this.lastConfirmationStep()}],r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"main"},r.a.createElement("img",{className:"medium",style:{display:"block",margin:"auto"},src:R.a,width:300,alt:"logo"}),r.a.createElement("h2",{className:"h-font"},"Register your new account"),this.renderSteps()),r.a.createElement("div",{className:"sideBar large"},r.a.createElement("img",{src:b.a,width:150,alt:"logo"}),r.a.createElement("p",null,"Karachi University Alumni System (KUAS) is an online application system which can act as a interactive medium between the old student and the University of Karachi. KUAS is a web based application which helps the institutions to track old students and to track them for future endeavours.")))}}]),t}(n.Component),ne=Object(O.c)(null,function(e){return Object(k.b)({push:S.d,setUser:I,registerUser:U,verifyUserCode:M},e)})(ae),re=function(e){var t=e.component,a=e.auth,n=Object(q.a)(e,["component","auth"]);return r.a.createElement(Y.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(Y.a,{to:{pathname:"/app",state:{from:e.location}}}):r.a.createElement(t,e)}}))},ie=a(466),le=a(170),oe=a(126),se=a(471),ce=(a(403),a(222)),ue=a.n(ce),de=a(33),me=[{title:"Community",icon:r.a.createElement(h.a,{type:"appstore"}),link:"/app/community"},{title:"Alumni",icon:r.a.createElement(h.a,{type:"team"}),link:"/app/alumni"},{title:"Profile",icon:r.a.createElement(h.a,{type:"user"}),link:"/app/profile"}],pe=[{title:"Dashboard",icon:r.a.createElement(h.a,{type:"dot-chart"}),link:"/app"}].concat(me,[{title:"Departments",icon:r.a.createElement(h.a,{type:"home"}),link:"/app/departments"},{title:"Pending Alumni",icon:r.a.createElement(h.a,{type:"user"}),link:"/app/pending-alumni"}]),fe=[].concat(Object(de.a)(pe),[{title:"Admins",icon:r.a.createElement(h.a,{type:"user"}),link:"/app/hods"}]),he=a(223),ge=a.n(he),ve=a(244),ye=a(467),Ee="SET_ALL_ALUMNI",be="SET_PENDING_ALUMNI",Se=function(){return function(e){return T("alumni/all",null,"get").then(function(t){var a=t.data;e(function(e){return{type:Ee,data:e}}(a.data))})}},ke=function(){return function(e){return T("alumni/pending",null,"get").then(function(t){var a=t.data;e(function(e){return{type:be,data:e}}(a.data))})}},Oe=function(e,t){return function(a){return T("user/update?id="+e,{status:t},"put")}},Ce=f.a.Search;function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";return e.charAt(0).toUpperCase()+e.slice(1)}var De=[{title:"Name",key:"Name",width:180,render:function(e){return r.a.createElement("span",{style:{marginLeft:10}},we(e.username))}},{title:"Gender",key:"Gender",align:"center",width:90,filters:[{text:"Male",value:"male"},{text:"Female",value:"female"}],render:function(e){return r.a.createElement("span",null,we(e.gender))},onFilter:function(e,t){return t.gender===e}},{title:"Skills",key:"Skills",width:120,align:"center",render:function(e){return r.a.createElement("span",null,e.skills.length?e.skills.map(function(e,t){return r.a.createElement(ve.a,{key:t,style:{marginBottom:"5px"}},e)}):r.a.createElement(ve.a,null,"None"))}},{title:"Job Status",key:"Job Status",align:"center",width:120,dataIndex:"employmentStatus"},{title:"Company",key:"Company",align:"center",width:120,dataIndex:"company"},{title:"Contact",key:"Contact",align:"center",dataIndex:"phone",width:120},{title:"Email",key:"Email",width:200,render:function(e){return r.a.createElement("span",{onClick:function(e){return e.stopPropagation()}},r.a.createElement("a",{href:"mailto:".concat(e.email)},e.email),"\xa0\xa0",r.a.createElement(h.a,{type:"link"}))}},{title:"Address",key:"Address",width:200,dataIndex:"address"}],Pe=function(e){var t=e.text,a=e.onRefresh,n=e.onSearch;return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 15px"}},r.a.createElement("h2",{style:{margin:0}},t),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(v.a,{shape:"circle",icon:"sync",size:"small",onClick:a,style:{marginRight:10}}),r.a.createElement(Ce,{placeholder:"Search",onSearch:n,style:{width:200}})))},_e=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tableHeight:500,loading:!0,searchKey:""},a.resizeTableHandler=function(){a.setState({tableHeight:window.innerHeight-180})},a.refresh=function(){a.setState({loading:!0}),a.props.getAllAlumni().then(function(){a.setState({loading:!1})})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.resizeTableHandler(),this.props.allAlumni.length?(this.setState({loading:!1}),this.props.getAllAlumni()):this.props.getAllAlumni().then(function(){e.setState({loading:!1})}),window.addEventListener("resize",this.resizeTableHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeTableHandler)}},{key:"filterIt",value:function(){var e=this.state.searchKey;return e.trim()?this.props.allAlumni.filter(function(e){return"verified"===e.status}).filter(function(t){return Object.keys(t).some(function(a){return a+""!=="key"&&a+""!=="updatedAt"&&a+""!=="createdAt"&&a+""!=="description"&&a+""!=="_id"?(t[a]+"").toLowerCase().includes(e.toLowerCase()):null})}):Object(de.a)(this.props.allAlumni.filter(function(e){return"verified"===e.status}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:ge.a.container},r.a.createElement(ye.a,{loading:this.state.loading,title:function(){return r.a.createElement(Pe,{onSearch:function(t){return e.setState({searchKey:t})},onRefresh:e.refresh,text:"Alumni"})},columns:De,onRow:function(t){return{onClick:function(){return e.props.push("/app/profile/"+t._id)}}},rowKey:function(e){return e._id},dataSource:this.filterIt(),size:"middle",bordered:!0,pagination:{hideOnSinglePage:!0},scroll:{y:this.state.tableHeight-90,x:1150},bodyStyle:{height:this.state.tableHeight-30}}))}}]),t}(n.Component),Te=Object(O.c)(function(e){return{allAlumni:e.alumni.allAlumni}},function(e){return Object(k.b)({getAllAlumni:Se,push:S.d},e)})(_e),xe=a(163),Ae=a.n(xe),je=a(228),Ne=a(229),Ie=a.n(Ne),Le=a(226),Ue="SET_ALL_HOD",Be=function(e){return{type:Ue,data:e}},Me=function(){return function(e){return T("hod/all",null,"get").then(function(t){var a=t.data;e(Be(a.data))})}},He=function(e,t){return function(a){return T("admin/create",e,"post").then(function(e){var n=e.data,r=Object(de.a)(t);r.push(n.data.mongoDB),a(Be(r))})}},Ve=a(16),Re=a.n(Ve),Fe=f.a.Search,ze=G.a.Option,Ye=p.a.Item,qe={labelCol:{span:6},wrapperCol:{span:14}},Ke=[{title:"Name",dataIndex:"username",width:350},{title:"Email",dataIndex:"email",width:350},{title:"Nic",dataIndex:"nicNo",width:250},{title:"Contact",dataIndex:"phone",width:200},{title:"Gender",dataIndex:"gender"}],Xe=function(e){var t=e.text,a=e.modalAction;return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 15px"}},r.a.createElement("h2",{style:{margin:0}},t),r.a.createElement("div",null,r.a.createElement(v.a,{icon:"plus",style:{marginRight:10},type:"primary",onClick:function(){return a("open")}},"Add Admin"),r.a.createElement(Fe,{placeholder:"Search",onSearch:function(e){return console.log(e)},style:{width:200}})))},We=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={tableHeight:500,loading:!0,spiner:!1},a.getData=Object(je.a)(Ae.a.mark(function e(){return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,a.props.getAllHOD();case 3:a.setState({loading:!1});case 4:case"end":return e.stop()}},e,this)})),a.resizeTableHandler=function(){a.setState({tableHeight:window.innerHeight-180})},a.modalAction=function(e){"close"===e?a.setState({modalOpen:!1}):a.setState({modalOpen:!0})},a.renderGender=function(){return[r.a.createElement(ze,{value:"male",key:Date.now()},"Male"),r.a.createElement(ze,{value:"female",key:Date.now()},"Female"),r.a.createElement(ze,{value:"other",key:Date.now()},"Other")]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=Object(W.a)({},t);n.DOB=Re()(n.DOB).format("YYYY-MM-DD"),n.role="admin",a.setState({spiner:!0}),a.props.createHOD(n,a.props.allHOD).then(function(){return a.setState({spiner:!1},function(){return a.modalAction("close")})})}})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){"alumni"===this.props.user.role?this.props.push("/app/community"):"admin"===this.props.user.role||"HOD"===this.props.user.role?this.props.push("/app"):(this.resizeTableHandler(),this.getData(),window.addEventListener("resize",this.resizeTableHandler))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeTableHandler)}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldDecorator;return r.a.createElement(Le.a,{spinning:this.state.loading},r.a.createElement("div",{className:Ie.a.container},r.a.createElement(se.a,{title:"Add Admin",visible:this.state.modalOpen,onOk:this.handleSubmit,onCancel:function(){return e.modalAction("close")}},r.a.createElement(Le.a,{spinning:this.state.spiner},r.a.createElement(p.a,{horizontal:!0},r.a.createElement(t.FormInput,{label:"Name: ",name:"username",initialValue:"",getFieldDecorator:a,message:"Required",required:!0,isDisabled:!1}),r.a.createElement(t.FormInput,{label:"Email: ",name:"email",initialValue:"",rules:{type:"email",message:"The input is not valid E-mail!"},getFieldDecorator:a,message:"Enter valid email address",required:!0,isDisabled:!1}),r.a.createElement(t.FormInput,{label:"nicNo: ",name:"nicNo",initialValue:"",getFieldDecorator:a,message:"Enter 13 digit nic no.",required:!0,isDisabled:!1,maxLength:13,type:"number"}),r.a.createElement(t.FormInput,{label:"Temp Pwd: ",name:"password",initialValue:"",getFieldDecorator:a,message:"Enter 8 characters password.",required:!0,isDisabled:!1,minLength:8,type:"number"}),r.a.createElement(t.FormDropDown,{label:"Gender: ",name:"gender",initialValue:"",getFieldDecorator:a,message:"Required",required:!0,isDisabled:!1,renderOptions:this.renderGender}),r.a.createElement(t.DatePicker,{label:"DOB: ",name:"DOB",initialValue:"",getFieldDecorator:a,message:"Required",required:!0,isDisabled:!1})))),r.a.createElement(ye.a,{title:function(){return r.a.createElement(Xe,{text:"Admins",modalAction:e.modalAction})},columns:Ke,dataSource:this.props.allHOD,size:"middle",pagination:!1,scroll:{y:this.state.tableHeight-90},style:{height:this.state.tableHeight},bordered:!0})))}}]),t}(n.Component);We.FormInput=function(e){var t=e.label,a=e.initialValue,n=e.name,i=e.message,l=e.required,o=e.isDisabled,s=e.getFieldDecorator,c=e.rules,u=e.maxLength,d=e.minLength;return r.a.createElement(Ye,Object.assign({label:t},qe),s(n,{initialValue:a,rules:[Object(W.a)({},c,{len:u||null,min:d||null,required:l,message:i})]})(r.a.createElement(f.a,{disabled:o})))},We.FormDropDown=function(e){var t=e.label,a=e.initialValue,n=e.name,i=e.message,l=e.required,o=e.isDisabled,s=e.getFieldDecorator,c=e.renderOptions,u=e.onChange;return r.a.createElement(Ye,Object.assign({label:t},qe),s(n,{initialValue:a,rules:[{required:l,message:i}]})(r.a.createElement(G.a,{onChange:u?function(e){return u(e)}:null,getPopupContainer:function(e){return e.parentNode},disabled:o},c())))},We.DatePicker=function(e){var t=e.label,a=e.initialValue,n=e.name,i=e.message,l=e.required,o=(e.isDisabled,e.getFieldDecorator);e.renderOptions,e.onChange;return r.a.createElement(Ye,Object.assign({label:t},qe),o(n,{initialValue:a,rules:[{required:l,message:i}]})(r.a.createElement(Z.a,{format:"DD/MM/YYYY"})))};var Ge=Object(O.c)(function(e){return{user:e.auth.user,allHOD:e.hod.allHOD}},function(e){return Object(k.b)({getAllHOD:Me,createHOD:He,push:S.d},e)})(p.a.create()(We)),Je=a(164),Ze=a.n(Je),$e="SET_ALL_DEPARTMENTS",Qe=function(e){return{type:$e,data:e}},et=function(){return function(e){return T("department/all",null,"get").then(function(t){var a=t.data;e(Qe(a.data))})}},tt=function(e,t){return function(a){return T("department/create",e,"post").then(function(e){var n=e.data,r=Object(de.a)(t);r.push(n.data),a(Qe(r))})}},at=function(e){return function(t){return T("department/delete?id="+e,null,"delete")}},nt=se.a.confirm,rt=p.a.Item,it=f.a.Search,lt=G.a.Option,ot={labelCol:{span:6},wrapperCol:{span:14}},st=function(e){var t=e.text,a=e.modalAction,n=e.onSearch;return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px"}},r.a.createElement("h2",{style:{margin:0}},t),r.a.createElement("div",null,r.a.createElement(v.a,{icon:"plus",style:{marginRight:10},type:"primary",onClick:function(){return a("open")}},"Add Department"),r.a.createElement(it,{placeholder:"Search",onSearch:n,style:{width:200}})))},ct=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={tableHeight:500,loading:!0,modalOpen:!1,inviteCheck:!1,spinner:!1,searchKey:""},a.showDeleteConfirm=function(e){nt({title:"Are you sure you want to delete this department?",okText:"Yes",okType:"danger",cancelText:"No",icon:r.a.createElement(h.a,{style:{color:"#980000",cursor:"pointer"},type:"delete"}),onOk:function(){a.setState({loading:!0}),a.props.deleteDepartment(e._id).then(function(){a.getData()})},onCancel:function(){}})},a.editDepart=function(e){console.log(e)},a.menu=function(e){return r.a.createElement(le.b,null,r.a.createElement(le.b.Item,{onClick:function(){return a.showDeleteConfirm(e)},key:"1"},"Delete"))},a.resizeTableHandler=function(){a.setState({tableHeight:window.innerHeight-180})},a.getData=function(){a.setState({loading:!0}),a.props.getAllDepartments().then(function(){a.setState({loading:!1})})},a.modalAction=function(e){"close"===e?a.setState({modalOpen:!1}):a.setState({modalOpen:!0})},a.renderUsers=function(){return 0!==a.props.allHOD.length?a.props.allHOD.map(function(e,t){return r.a.createElement(lt,{value:e._id,key:t},e.username)}):[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=Object(W.a)({},t);a.setState({spinner:!0}),a.props.addDepartment(n,a.props.allDepartments).then(function(){return a.setState({spinner:!1},function(){return a.modalAction("close")})})}})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){"alumni"===this.props.user.role?this.props.push("/app/community"):(this.resizeTableHandler(),this.getData(),window.addEventListener("resize",this.resizeTableHandler))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeTableHandler)}},{key:"filterIt",value:function(){var e=this.state.searchKey;return e.trim()?this.props.allDepartments.filter(function(t){return Object.keys(t).some(function(a){return a+""!=="key"&&a+""!=="updatedAt"&&a+""!=="createdAt"&&a+""!=="_id"?(t[a]+"").toLowerCase().includes(e.toLowerCase()):null})}):Object(de.a)(this.props.allDepartments)}},{key:"render",value:function(){var e=this,a=this.filterIt(),n=this.props.form.getFieldDecorator;return r.a.createElement(Le.a,{spinning:this.state.loading},r.a.createElement("div",{className:Ze.a.container},r.a.createElement(st,{text:"Departments",modalAction:this.modalAction,onSearch:function(t){return e.setState({searchKey:t})}}),this.state.searchKey?r.a.createElement("div",{style:{margin:"15px 25px 5px 30px",fontSize:16}},'Showing result for "',this.state.searchKey,'"'):null,r.a.createElement("div",{style:{padding:"10px 15px",display:"flex",flexWrap:"wrap",maxHeight:"calc(100% - 65px)",overflow:"auto"}},a.length?a.map(function(a){return r.a.createElement(t.DepartmentItem,{menu:e.menu,key:a._id,d:a,style:Ze.a.departmentItem})}):r.a.createElement("div",{style:{textAlign:"center",color:"#999",marginTop:80,flex:1}},"No Data"))),r.a.createElement(se.a,{title:"Add Department",visible:this.state.modalOpen,destroyOnClose:!0,onOk:this.handleSubmit,onCancel:function(){return e.modalAction("close")}},r.a.createElement(Le.a,{spinning:this.state.spinner},r.a.createElement(p.a,null,r.a.createElement(t.FormInput,{label:"Name: ",name:"name",initialValue:"",getFieldDecorator:n,message:"Required",required:!0,isDisabled:!1}),r.a.createElement(t.FormInput,{label:"Initials: ",name:"initials",initialValue:"",getFieldDecorator:n,message:"Required",required:!0,isDisabled:!1})))))}}]),t}(n.Component);ct.DepartmentItem=function(e){var t=e.d,a=e.style,n=e.menu;return r.a.createElement("div",{key:t._id,className:a},r.a.createElement("span",null,t.initials," \u2013 ",t.name),r.a.createElement(oe.a,{overlay:n(t),trigger:["click"]},r.a.createElement("span",{className:"ant-dropdown-link"},r.a.createElement(h.a,{style:{fontSize:17,cursor:"pointer"},type:"more"}))))},ct.FormInput=function(e){var t=e.label,a=e.initialValue,n=e.name,i=e.message,l=e.required,o=e.isDisabled,s=e.getFieldDecorator;return r.a.createElement(rt,Object.assign({label:t},ot),s(n,{initialValue:a,rules:[{required:l,message:i}]})(r.a.createElement(f.a,{disabled:o})))},ct.FormDropDown=function(e){var t=e.label,a=e.initialValue,n=e.name,i=e.message,l=e.required,o=e.isDisabled,s=e.getFieldDecorator,c=e.renderOptions,u=e.onChange;return r.a.createElement(rt,Object.assign({label:t},ot),s(n,{initialValue:a,rules:[{required:l,message:i}]})(r.a.createElement(G.a,{onChange:u?function(e){return u(e)}:null,getPopupContainer:function(e){return e.parentNode},disabled:o},c())))};var ut=Object(O.c)(function(e){return{allDepartments:e.departments.allDepartments,user:e.auth.user,allHOD:e.hod.allHOD}},function(e){return Object(k.b)({getAllDepartments:et,getAllHOD:Me,push:S.d,deleteDepartment:at,addDepartment:tt},e)})(p.a.create()(ct)),dt=a(49),mt=a.n(dt),pt=a(465),ft="SET_CURRENT_USER",ht=function(e){return{type:ft,data:e}},gt=function(e){return function(t){return T("user/get?id="+e,null,"get").then(function(e){var a=e.data;t(ht(a.data.mongoDB))})}},vt=function(e){return function(t){return T("user/me",e,"put").then(function(e){var a=e.data;t(ht(a.data.mongoDB))})}},yt=a(230),Et=a.n(yt);function bt(e){var t=e.title,a=e.value;return r.a.createElement("div",null,r.a.createElement("span",{className:"title",style:{flex:1,color:"#001529"}},t,":"),r.a.createElement("span",{className:"value"},a||r.a.createElement(r.a.Fragment,null,"\u2013")))}var St=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,currId:null,editModal:!1,editing:!1},a.handleSubmit=function(e){a.setState({editing:!0}),e.preventDefault(),a.props.form.validateFields(function(e,t){e?a.setState({editing:!1}):a.props.updateUser(t).then(function(){a.setState({editing:!1,editModal:!1})})})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.pathname.split("/")[3];this.setState({currId:t}),this.props.getCurrentUser(t||this.props.user._id).then(function(){e.setState({loading:!1})},function(){e.props.push("/app/profile")}),this.props.departs.length||this.props.getAllDepartments()}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.location.pathname.split("/")[3];this.state.currId!==t&&(this.setState({loading:!0,currId:t}),this.props.getCurrentUser(t||this.props.user._id).then(function(){e.setState({loading:!1})},function(){e.props.push("/app/profile")}))}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement(Le.a,null));var t=this.props.form.getFieldDecorator,a={};this.props.currentUser&&(a=Object(W.a)({},this.props.currentUser));var n=a,i=n.username,l=n.email,o=n.phone,s=n.enrollmentNo,c=n.nicNo,u=n.bio,d=n.skills,m=n.DOB,g=n.address,y=n.gender,E=n.role,b=n.status,S=n.createdAt,k=n.department,O=n.degree,C=n.company,w=n.workingExperience,D=n.jobTitle,P=n.employmentStatus;return r.a.createElement("div",{ref:function(t){return e.componentRef=t},className:mt.a.alumniProfile},r.a.createElement("div",{className:mt.a.top},r.a.createElement("div",{className:mt.a.profileBanner},r.a.createElement("div",{className:mt.a.profileImg},r.a.createElement(pt.a,{src:"https://picsum.photos/100",size:100,icon:"user",shape:"square"})),r.a.createElement("div",{className:mt.a.profileTopData},r.a.createElement("h2",{style:{color:"#001529",textTransform:"capitalize"}},i," (",E,")","alumni"===E?r.a.createElement(ve.a,{className:"no-print",style:{marginLeft:10}},b):null),r.a.createElement("span",null,l),r.a.createElement("p",null,u),r.a.createElement("div",null,d?d.map(function(e,t){return r.a.createElement(ve.a,{key:t},e)}):null))),r.a.createElement(Et.a,{trigger:function(){return r.a.createElement(v.a,{className:mt.a.backBtn+" no-print",type:"secondary"},r.a.createElement(h.a,{type:"download"}),"Print Resume")},content:function(){return e.componentRef}})),r.a.createElement("div",{className:mt.a.personalDetails},r.a.createElement("div",{style:{background:"#00000024",fontWeight:"bolder",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 12px"}},r.a.createElement("h2",null,"Personal Details"),this.props.user._id===this.props.currentUser._id?r.a.createElement(v.a,{type:"ghost",icon:"edit",className:"no-print",onClick:function(){e.setState({editModal:!0})}}):null),r.a.createElement("div",{className:mt.a.info},this.props.user._id===this.props.currentUser._id||"alumni"!==this.props.user.role?r.a.createElement("div",{className:mt.a.infoItems},r.a.createElement("h3",null,"Basic Info"),r.a.createElement(bt,{title:"Birth Date",value:Re()(m).format("MMM DD, YYYY")}),r.a.createElement(bt,{title:"Gender",value:y}),r.a.createElement(bt,{title:"Contact",value:o}),r.a.createElement(bt,{title:"NIC no",value:c}),r.a.createElement(bt,{title:"Address",value:g}),r.a.createElement(bt,{title:"Registered At",value:Re()(S).format("MMM DD, YYYY h:mm a")})):null,r.a.createElement("div",{className:mt.a.infoItems},r.a.createElement("h3",null,"Work Experience"),r.a.createElement(bt,{title:"Job Position",value:D}),r.a.createElement(bt,{title:"Company",value:C}),r.a.createElement(bt,{title:"Experience in relevant field",value:w})),r.a.createElement("div",{className:mt.a.infoItems},r.a.createElement("h3",null,"Education"),r.a.createElement(bt,{title:"Enrollment No",value:s}),r.a.createElement(bt,{title:"Department",value:k?"".concat(k.initials,"-").concat(k.name).toUpperCase():void 0}),r.a.createElement(bt,{title:"Degree",value:O})))),r.a.createElement(se.a,{title:"Edit Profile",visible:this.state.editModal,onCancel:function(){e.setState({editModal:!1})},okText:"Save",onOk:this.handleSubmit,okButtonProps:{loading:this.state.editing},destroyOnClose:!0,centered:!0},r.a.createElement(p.a,{labelCol:{span:7},wrapperCol:{span:12},onSubmit:this.handleSubmit},r.a.createElement(p.a.Item,{label:"Bio"},t("bio",{initialValue:u})(r.a.createElement(f.a.TextArea,{type:"text"}))),r.a.createElement(p.a.Item,{label:"Contact"},t("phone",{initialValue:o})(r.a.createElement(f.a,{type:"number"}))),r.a.createElement(p.a.Item,{label:"Address"},t("address",{initialValue:g})(r.a.createElement(f.a,{type:"text"}))),r.a.createElement(p.a.Item,{label:"Gender"},t("gender",{initialValue:y})(r.a.createElement(G.a,null,r.a.createElement(G.a.Option,{value:"male"},"Male"),r.a.createElement(G.a.Option,{value:"female"},"Female"),r.a.createElement(G.a.Option,{value:"other"},"Other")))),r.a.createElement(p.a.Item,{label:"Employment Status"},t("employmentStatus",{initialValue:P})(r.a.createElement(G.a,null,r.a.createElement(G.a.Option,{value:"Employed"},"Employed"),r.a.createElement(G.a.Option,{value:"Part-Time"},"Part-Time"),r.a.createElement(G.a.Option,{value:"Self-Employed"},"Self-Employed"),r.a.createElement(G.a.Option,{value:"Unemployed"},"Unemployed")))),r.a.createElement(p.a.Item,{label:"Skills"},t("skills",{initialValue:d})(r.a.createElement(G.a,{dropdownStyle:{display:"none"},mode:"tags",maxTagCount:5}))),r.a.createElement(p.a.Item,{label:"Experience"},t("workingExperience",{initialValue:w})(r.a.createElement(f.a,{type:"text"}))),r.a.createElement(p.a.Item,{label:"Company"},t("company",{initialValue:C})(r.a.createElement(f.a,{type:"text"}))),r.a.createElement(p.a.Item,{label:"Job Position"},t("jobTitle",{initialValue:D})(r.a.createElement(f.a,{type:"text"}))),r.a.createElement(p.a.Item,{label:"Degree"},t("degree",{initialValue:O})(r.a.createElement(f.a,{type:"text"}))),r.a.createElement(p.a.Item,{label:"Department"},t("department",{initialValue:k?k._id:null})(r.a.createElement(G.a,null,this.props.departs.map(function(e){return r.a.createElement(G.a.Option,{key:e._id,value:e._id},"".concat(e.initials,"-").concat(e.name))})))))))}}]),t}(n.Component),kt=Object(O.c)(function(e){return{currentUser:e.user.currentUser,user:e.auth.user,location:e.router.location,departs:e.departments.allDepartments}},function(e){return Object(k.b)({push:S.d,updateUser:vt,getCurrentUser:gt,getAllDepartments:et},e)})(p.a.create({name:"editProfile"})(St)),Ot=a(165),Ct=a.n(Ot),wt=a(103),Dt=f.a.TextArea,Pt=r.a.memo(function(e){var t=e.verifiedUser,a=e.addHandler,i=e.loading,l=e.refresh,o=e.role,s={padding:"5px 10px",background:"#f5f6f7",border:"1px solid #d9d9d9",borderBottom:"1px solid #dddfe2",borderRadius:"3px 3px 0 0",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"space-between"},c=Object(n.useState)(""),u=Object(wt.a)(c,2),d=u[0],m=u[1],p=Object(n.useState)(!1),f=Object(wt.a)(p,2),y=f[0],E=f[1],b=Object(n.useState)(!1),S=Object(wt.a)(b,2),k=S[0],O=S[1],C=Object(n.useState)(!1),w=Object(wt.a)(C,2),D=w[0],P=w[1];return r.a.createElement("div",{style:{marginBottom:25,marginLeft:160}},r.a.createElement("div",{style:s},r.a.createElement("span",null,"Create Post"),r.a.createElement(h.a,{onClick:function(){return i||l()},type:i?"loading":"reload"})),r.a.createElement(Dt,{onFocus:function(){return P(!0)},onBlur:function(){return P(!1)},value:d,style:{resize:"none",borderRadius:"0",boxShadow:"none !important"},onChange:function(e){return m(e.target.value)},placeholder:"What's on your mind?",rows:3,disabled:k}),r.a.createElement("div",{style:Object(W.a)({},s,{background:"#f5f6f7",border:"1px solid #d9d9d9",borderTop:"1px solid #dddfe2",borderRadius:"0 0 3px 3px",height:D||d?"auto":0,padding:D||d?"5px 10px":0})},"super-admin"===o||"Admin"===o?r.a.createElement(g.a,{onChange:function(e){return E(e.target.checked)},checked:y,style:{display:D||d?"block":"none"}},"Broadcast"):null,r.a.createElement(v.a,{type:"primary",disabled:k||i,style:{marginLeft:"auto",display:D||d?"block":"none",fontSize:12,height:"auto",padding:"4px 10px",fontWeight:500},onClick:function(){if(d.trim()){if(O(!0),!t)return $.a.error("Please verify you email address before creating community post."),void O(!1);a(d,y).then(function(){O(!1),m("")})}}},"Post",k?r.a.createElement(h.a,{type:"loading"}):r.a.createElement(h.a,{type:"right"}))))}),_t=a(243),Tt=a(231),xt=a.n(Tt),At=a(75),jt=a.n(At),Nt=se.a.confirm,It=r.a.memo(function(e){var t=e.editPost,a=e.deletePost,n=e.routeTo,i=e.userId,l=e.currUser,o=e.user,s=e.timestamp,c=e.statusText,u=e.likeCount,d=e.commentsCount,m=e.onLikeClick,p=e.onDislikeClick,f=e.onCommentClick,g=e.liked,v=e.broadcast,y=null,E=function(){Nt({title:"Are you sure you want to delete this post?",okText:"Yes",okType:"danger",cancelText:"No",icon:r.a.createElement(h.a,{style:{color:"#980000",cursor:"pointer"},type:"delete"}),onOk:function(){a()},onCancel:function(){}})},b=r.a.createElement(le.b,null,r.a.createElement(le.b.Item,{onClick:E,key:"1"},"Delete"));return"super-admin"===l.role&&(b=r.a.createElement(le.b,null,r.a.createElement(le.b.Item,{onClick:E,key:"1"},"Delete"))),i===l._id&&(b=r.a.createElement(le.b,null,r.a.createElement(le.b.Item,{onClick:t,key:"0"},"Edit"),r.a.createElement(le.b.Item,{onClick:E,key:"1"},"Delete"))),r.a.createElement("div",{className:jt.a.post},r.a.createElement("div",{className:jt.a.mainInfo},r.a.createElement("div",null,r.a.createElement(pt.a,{src:"https://picsum.photos/50",size:30,icon:"user",shape:" circle"}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:10}},r.a.createElement("h2",{style:{textTransform:"capitalize",cursor:"pointer"},onClick:function(){return n("/app/profile/"+o._id)}},o.username),r.a.createElement("span",{className:jt.a.timeStamp},r.a.createElement(_t.a,{placement:"right",mouseEnterDelay:1.2,title:r.a.createElement("span",{style:{fontSize:10}},Re()(s).format("MMM DD, YYYY h:mm a"))},r.a.createElement(xt.a,{fromNow:!0,date:s}))))),r.a.createElement("div",null,v?r.a.createElement(h.a,{type:"notification",style:{color:"#f17c15",marginBottom:3,fontSize:16},theme:"filled"}):null,r.a.createElement("span",{className:jt.a.menuIcon,style:{display:i===l._id||"super-admin"===l.role?"block":"none"}},r.a.createElement(oe.a,{overlay:b,trigger:["click"]},r.a.createElement("span",{className:"ant-dropdown-link"},r.a.createElement(h.a,{style:{fontSize:18},type:"more"})))))),r.a.createElement("div",{className:jt.a.postData},c),r.a.createElement("div",{className:jt.a.reactionContainer},r.a.createElement("div",null,r.a.createElement("span",{style:{color:g?"#e0245e":null}},u||null),r.a.createElement(_t.a,{title:function(){return r.a.createElement("span",{style:{fontSize:11}},"like")},placement:"right",mouseEnterDelay:1},r.a.createElement(h.a,{onClick:function(){clearTimeout(y),y=setTimeout(function(){g?p():m()},500)},type:"heart",theme:g?"filled":"outlined",style:{fontSize:"15px",color:g?"#e0245e":null,marginLeft:5,cursor:"pointer"}}))),r.a.createElement("div",null,r.a.createElement("span",null,d||null),r.a.createElement(_t.a,{title:function(){return r.a.createElement("span",{style:{fontSize:11}},"comment")},placement:"right",mouseEnterDelay:1},r.a.createElement(h.a,{onClick:f,type:"message",theme:"outlined",style:{fontSize:"15px",marginLeft:5,cursor:"pointer"}})))))}),Lt=a(169),Ut=a(232),Bt=a.n(Ut),Mt=a(473),Ht=se.a.confirm;function Vt(e){var t=e.onDelete,a=e.text,n=e.user,i=e.currUser,l=e.index;return r.a.createElement("div",{className:"commentItem",style:{margin:"10px auto",padding:10,borderRadius:4,background:"#00000004"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(pt.a,{src:"https://picsum.photos/50",size:25,icon:"user",shape:" circle"}),r.a.createElement("h2",{style:{textTransform:"capitalize",fontSize:13,margin:0,marginLeft:10}},n.username)),i._id===n._id||"super-admin"===i.role?r.a.createElement(h.a,{onClick:function(){return t(l)},style:{color:"#980000",cursor:"pointer"},type:"delete"}):null),r.a.createElement("div",{style:{marginLeft:35}},a))}var Rt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={value:""},a.showDeleteConfirm=function(e){Ht({title:"Are you sure you want to delete this comment?",okText:"Yes",okType:"danger",cancelText:"No",icon:r.a.createElement(h.a,{style:{color:"#980000",cursor:"pointer"},type:"delete"}),onOk:function(){a.props.deleteComment(e)},onCancel:function(){}})},a.scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth"})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.routeTo,n=t.commentLoading,i=t.addComment,l=t.user,o=t.onDislikeHandler,s=t.onClose,c=t.commenting,u=t.onLikeHandler,d=t.onDeletePostHandler,m=t.editPost,p=null,h=null;if(c){var g=c.sender,y=c.likedBy,E=c.timeStamp,b=c.content,S=c.comments,k=c._id,O=c.status;p=r.a.createElement(It,{editPost:function(){m(c)},routeTo:a,deletePost:function(){d(k)},broadcast:"broadcast"===O,postId:k,currUser:l,userId:g._id,user:g,liked:y.includes(l._id),timestamp:E,statusText:b,likeCount:y.length,commentsCount:S.length,onCommentClick:function(){},onLikeClick:function(){return u(c)},onDislikeClick:function(){return o(c)}}),h=S.length?S.map(function(t,a){return r.a.createElement(Vt,{key:a,index:a,onDelete:e.showDeleteConfirm,user:t.user,currUser:l,text:t.text})}):r.a.createElement("span",{style:{display:"block",margin:"auto",width:"fit-content",marginTop:50,color:"#d3d3d3",userSelect:"none"}},"No comments yet")}return r.a.createElement(Mt.a,{placement:"right",closable:!0,onClose:function(){e.setState({value:""}),s()},visible:Boolean(c),width:600,bodyStyle:{height:"100%"}},p,r.a.createElement("div",{style:{marginBottom:50}},r.a.createElement("h3",null,"Comments"),h),r.a.createElement("div",{style:{height:50,position:"absolute",bottom:0,left:0,width:"100%",background:"#eee",display:"flex"}},r.a.createElement(f.a,{type:"text",value:this.state.value,onChange:function(t){return e.setState({value:t.target.value})},onPressEnter:function(){n||(i(e.state.value,c),e.setState({value:""}),setTimeout(function(){e.scrollToBottom()}))},placeholder:"Type your comment",style:{background:"transparent",border:"none",boxShadow:"none",borderColor:"transparent",lineHeight:"50px",height:50}}),r.a.createElement(v.a,{type:"primary",loading:n,onClick:function(){i(e.state.value,c),e.setState({value:""}),setTimeout(function(){e.scrollToBottom()})},style:{height:"100%",borderRadius:0}},"Comment")),r.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}}))}}]),t}(n.PureComponent),Ft={SET_ALL_POSTS:"SET_ALL_POSTS",SET_POSTS_COUNT:"SET_POSTS_COUNT",SET_BROADCASTED_POSTS_COUNT:"SET_BROADCASTED_POSTS_COUNT",SET_BROADCASTED_POSTS:"SET_BROADCASTED_POSTS"},zt=function(e){return{type:Ft.SET_ALL_POSTS,data:e}},Yt=function(e){return{type:Ft.SET_BROADCASTED_POSTS,data:e}},qt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return function(n){return T("posts/all?page="+e,null,"get").then(function(e){var a=e.data;n(function(e){return{type:Ft.SET_POSTS_COUNT,data:e}}(a.data.count)),t(a.data.posts)},a)}},Kt=function(e){return function(t){return T("broadcast/all?page="+e,null,"get").then(function(e){var a=e.data;return t(function(e){return{type:Ft.SET_BROADCASTED_POSTS_COUNT,data:e}}(a.data.count)),a.data.post})}},Xt=function(e){return function(){return T("posts/create",e,"post")}},Wt=function(e,t){return function(){return T("posts/update?id="+e,t,"put")}},Gt=function(e){return function(){return T("posts/delete?id="+e,null,"delete")}},Jt=a(234),Zt=a.n(Jt),$t=Lt.a.TabPane;Bt.a.polyfill();var Qt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).listenToScroll=function(){a.myRef.current.scrollTop>250?a.state.scrollToTop||a.setState({scrollToTop:!0}):a.state.scrollToTop&&a.setState({scrollToTop:!1})},a.scrollToTop=function(){a.myRef.current.scroll({top:0,left:0,behavior:"smooth"})},a.onLikeHandler=function(e){if(a.props.user.verified){var t=e.likedBy,n=e.comments,r=e.sender,i=e.content,l=e._id,o=e.timeStamp;t.push(a.props.user._id);var s=Object(de.a)(a.props.allPosts);s.find(function(n,r){return n._id===e._id&&(s[r]=Object(W.a)({},n,{likedBy:t}),a.state.commenting&&e._id===a.state.commenting._id&&a.setState({commenting:s[r]}),!0)}),a.props.setAllPosts(s),a.props.updatePost(l,{sender:r._id,content:i,comments:n,likedBy:t,timeStamp:o})}else $.a.error("Please verify you email address before any community activity.")},a.onDislikeHandler=function(e){var t=e.likedBy,n=e.comments,r=e.sender,i=e.content,l=e._id,o=e.timeStamp,s=t.filter(function(e){return e!==a.props.user._id}),c=Object(de.a)(a.props.allPosts);c.find(function(t,n){return t._id===e._id&&(c[n]=Object(W.a)({},t,{likedBy:s}),a.state.commenting&&e._id===a.state.commenting._id&&a.setState({commenting:c[n]}),!0)}),a.props.setAllPosts(c),a.props.updatePost(l,{sender:r._id,content:i,comments:n,likedBy:s,timeStamp:o})},a.addPostHandler=function(e,t){return a.props.createPost({sender:a.props.user._id,timeStamp:Date.now(),status:t?"broadcast":"post",content:e}).then(function(e){var t=e.data,n=Object(de.a)(a.props.allPosts);n.unshift(t.data),a.props.setAllPosts(n)})},a.filteredPosts=function(e){return e.filter(function(e){return e.sender._id===a.props.user._id})},a.addComment=function(e,t){if(e.trim()){if(!a.props.user.verified)return $.a.error("Please verify you email address before any community activity."),void a.setState({commentLoading:!1});a.setState({commentLoading:!0});var n=t.likedBy,r=t.comments,i=t.sender,l=t.content,o=t._id,s=t.timeStamp,c=Object(de.a)(a.props.allPosts),u=Object(de.a)(r);u.push({user:{_id:a.props.user._id,username:a.props.user.username},text:e.trim()}),c.find(function(e,n){return e._id===o&&(c[n]=Object(W.a)({},t,{comments:u}),a.state.commenting&&a.setState({commenting:c[n]}),!0)}),a.props.setAllPosts(c),r.push({user:a.props.user._id,text:e.trim()}),a.props.updatePost(o,{sender:i._id,content:l,comments:r,likedBy:n,timeStamp:s}).then(function(){a.setState({commentLoading:!1})})}else a.setState({commentLoading:!1})},a.deleteCommentHandler=function(e){if(a.state.commenting){var t=Object(W.a)({},a.state.commenting),n=t.likedBy,r=t.comments,i=t.sender,l=t.content,o=t._id,s=t.timeStamp;r=r.filter(function(t,a){return a!==e});var c=Object(de.a)(a.props.allPosts);c.find(function(e,n){return e._id===t._id&&(c[n]=Object(W.a)({},t,{comments:r}),a.state.commenting&&a.setState({commenting:c[n]}),!0)}),a.props.setAllPosts(c),a.props.updatePost(o,{sender:i._id,content:l,comments:r,likedBy:n,timeStamp:s})}},a.onRefresh=function(){a.setState({loading:!0,page:1},function(){new Promise(function(e,t){a.props.getAllPosts(a.state.page,e,t)}).then(function(e){a.props.setAllPosts(e),a.setState({loading:!1})})})},a.loadMore=function(){a.setState({loadingMore:!0}),new Promise(function(e,t){a.props.getAllPosts(a.state.page+1,e,t)}).then(function(e){a.props.setAllPosts([].concat(Object(de.a)(a.props.allPosts),Object(de.a)(e))),a.setState(function(e){return{loadingMore:!1,page:e.page+1}})})},a.deletePostHandler=function(e){var t=a.props.allPosts.filter(function(t){return t._id!==e});a.props.setAllPosts(t),a.state.commenting&&a.state.commenting._id===e&&a.setState({commenting:null}),a.props.deletePost(e)},a.handleOk=function(){if(a.state.editValue.trim()){a.setState({confirmLoading:!0});var e=a.state.selectedPost,t=e.likedBy,n=e.comments,r=e.sender,i=e._id,l=e.timeStamp,o=Object(de.a)(a.props.allPosts);o.find(function(e,t){return e._id===i&&(o[t]=Object(W.a)({},e,{content:a.state.editValue}),a.state.commenting&&e._id===a.state.commenting._id&&a.setState({commenting:o[t]}),!0)}),a.props.updatePost(i,{sender:r._id,content:a.state.editValue,comments:n,likedBy:t,timeStamp:l}).then(function(){a.props.setAllPosts(o),a.setState({selectedPost:null,confirmLoading:!1})})}},a.handleCancel=function(){a.setState({selectedPost:null})},a.editingPost=function(e){a.setState({selectedPost:e,editValue:e.content,commenting:null})},a.handleTabViewChange=function(e){a.setState({tabViewKey:e,page:1}),"3"===e&&(a.props.allBroadcastedPosts.length||(a.setState({broadcastLoading:!0}),a.props.getAllBroadcastedPosts(1).then(function(e){a.props.setAllBroadcastedPosts(e),a.setState({broadcastLoading:!1})})))},a.myRef=r.a.createRef(),a.state={scrollToTop:!1,commenting:null,tabViewKey:"1",loading:!0,broadcastLoading:!1,loadingMore:!1,page:1,commentLoading:!1,confirmLoading:!1,selectedPost:null,editValue:""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.myRef.current.addEventListener("scroll",this.listenToScroll),new Promise(function(t,a){e.props.getAllPosts(e.state.page,t,a)}).then(function(t){e.props.setAllPosts(t),e.setState({loading:!1})})}},{key:"componentWillUnmount",value:function(){this.myRef.current.removeEventListener("scroll",this.listenToScroll)}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedPost,n=t.confirmLoading,i=t.editValue,l=t.tabViewKey,o=t.scrollToTop,s=t.loading,c=t.commentLoading,u=t.commenting,d=[];return"2"===l&&(d=this.filteredPosts(this.props.allPosts)),r.a.createElement("div",{style:{width:"100%",height:"calc(100vh - 64px)",overflow:"auto"},ref:this.myRef},r.a.createElement("div",{className:Ct.a.container},r.a.createElement(Pt,{addHandler:this.addPostHandler,loading:s,refresh:this.onRefresh,verifiedUser:this.props.user.verified,role:this.props.user.role}),r.a.createElement(Lt.a,{onChange:this.handleTabViewChange,activeKey:l,tabPosition:"left"},r.a.createElement($t,{tab:"Timeline",key:"1"},this.state.loading?r.a.createElement("div",{style:{width:"100%",height:150,display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement(Le.a,null)):this.props.allPosts.length?this.props.allPosts.sort(function(e,t){return t.timeStamp-e.timeStamp}).map(function(t,a){return r.a.createElement(It,{deletePost:function(){var a=t._id;e.deletePostHandler(a)},editPost:function(){var a=t;e.editingPost(a)},broadcast:"broadcast"===t.status,key:a,postId:t._id,currUser:e.props.user,routeTo:function(t){return e.props.push(t)},userId:t.sender._id,user:t.sender,liked:t.likedBy.includes(e.props.user._id),timestamp:t.timeStamp,statusText:t.content,likeCount:t.likedBy.length,commentsCount:t.comments.length,onCommentClick:function(){var a=t;e.setState({commenting:a})},onLikeClick:function(){var a=t;e.onLikeHandler(a)},onDislikeClick:function(){var a=t;e.onDislikeHandler(a)}})}):r.a.createElement("span",{style:{width:"fit-content",display:"block",margin:"50px auto",color:"#00000080"}},"No posts available"),Math.ceil(this.props.postsCount/10)>this.state.page&&!this.state.loading?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(v.a,{loading:this.state.loadingMore,onClick:this.loadMore,type:"secondary"},"Load More")):null),r.a.createElement($t,{tab:"My Posts",key:"2"},this.state.loading?r.a.createElement("div",{style:{width:"100%",height:150,display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement(Le.a,null)):d.length?d.sort(function(e,t){return t.timeStamp-e.timeStamp}).map(function(t,a){return r.a.createElement(It,{key:a,deletePost:function(){var a=t._id;e.deletePostHandler(a)},editPost:function(){var a=t;e.editingPost(a)},postId:t._id,broadcast:"broadcast"===t.status,currUser:e.props.user,routeTo:function(t){return e.props.push(t)},userId:t.sender._id,user:t.sender,liked:t.likedBy.includes(e.props.user._id),timestamp:t.timeStamp,statusText:t.content,likeCount:t.likedBy.length,commentsCount:t.comments.length,onCommentClick:function(){var a=t;e.setState({commenting:a})},onLikeClick:function(){var a=t;e.onLikeHandler(a)},onDislikeClick:function(){var a=t;e.onDislikeHandler(a)}})}):r.a.createElement("span",{style:{width:"fit-content",display:"block",margin:"50px auto",color:"#00000080"}},"No posts available")),r.a.createElement($t,{tab:"Broadcasted Posts",key:"3"},this.state.broadcastLoading?r.a.createElement("div",{style:{width:"100%",height:150,display:"flex",flexDirection:"column",justifyContent:"center"}},r.a.createElement(Le.a,null)):this.props.allBroadcastedPosts.length?this.props.allBroadcastedPosts.sort(function(e,t){return t.timeStamp-e.timeStamp}).map(function(t,a){return r.a.createElement(It,{key:a,deletePost:function(){var a=t._id;e.deletePostHandler(a)},editPost:function(){var a=t;e.editingPost(a)},broadcast:"broadcast"===t.status,postId:t._id,currUser:e.props.user,routeTo:function(t){return e.props.push(t)},userId:t.sender._id,user:t.sender,liked:t.likedBy.includes(e.props.user._id),timestamp:t.timeStamp,statusText:t.content,likeCount:t.likedBy.length,commentsCount:t.comments.length,onCommentClick:function(){var a=t;e.setState({commenting:a})},onLikeClick:function(){var a=t;e.onLikeHandler(a)},onDislikeClick:function(){var a=t;e.onDislikeHandler(a)}})}):r.a.createElement("span",{style:{width:"fit-content",display:"block",margin:"50px auto",color:"#00000080"}},"No posts available"))),r.a.createElement(v.a,{className:Ct.a.scrollBtn,style:{display:o?"initial":"none"},onClick:this.scrollToTop},"Top")),r.a.createElement(Rt,{editPost:this.editingPost,deleteComment:this.deleteCommentHandler,onDeletePostHandler:this.deletePostHandler,routeTo:function(t){return e.props.push(t)},commentLoading:c,addComment:this.addComment,commenting:u,onClose:function(){return e.setState({commenting:null})},onLikeHandler:this.onLikeHandler,onDislikeHandler:this.onDislikeHandler,user:this.props.user}),r.a.createElement(se.a,{title:"Edit Post",visible:Boolean(a),onOk:this.handleOk,okText:"Update",confirmLoading:n,onCancel:this.handleCancel,centered:!0},r.a.createElement(Zt.a,{value:i,style:{resize:"none",borderRadius:"0",boxShadow:"none !important"},onChange:function(t){var a=t.target;return e.setState({editValue:a.value})},placeholder:"What's on your mind?",rows:5,disabled:n})))}}]),t}(n.Component),ea=Object(O.c)(function(e){return{allPosts:e.community.allPosts,allBroadcastedPosts:e.community.allBroadcastedPosts,postsCount:e.community.postsCount,user:e.auth.user}},function(e){return Object(k.b)({getAllPosts:qt,setAllPosts:zt,getAllBroadcastedPosts:Kt,setAllBroadcastedPosts:Yt,updatePost:Wt,deletePost:Gt,createPost:Xt,push:S.d},e)})(Qt),ta=a(235),aa=a.n(ta),na=a(474),ra=a(92),ia=a(51),la=a(236),oa=a.n(la),sa=a(237),ca=a.n(sa),ua=a(238),da=a.n(ua),ma=a(239),pa=a.n(ma),fa=a(240),ha=a.n(fa),ga="SET_DASHBOARD_STATS",va="SET_COMMUNITY_STATS",ya=function(e){return function(e){return T("stats/dashboard",null,"get").then(function(t){var a=t.data;e(function(e){return{type:ga,data:e}}(a.data))})}},Ea=function(e){return function(e){return T("stats/community",null,"get").then(function(t){var a=t.data;e(function(e){return{type:va,data:e}}(a.data.lastMonthTrend))})}},ba=a(166),Sa=a.n(ba),ka=[{title:"Alumni",key:"alumni",icon:oa.a},{title:"Department",key:"departs",icon:da.a},{title:"Admin",key:"admins",icon:ca.a},{title:"Community Posts",key:"postsCount",icon:pa.a}],Oa=r.a.memo(function(e){var t=e.icon,a=e.title,n=e.value;return r.a.createElement(na.a,{bodyStyle:{padding:15}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("img",{width:60,src:t,alt:""}),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("h2",null,a),r.a.createElement("span",{style:{fontSize:28}},r.a.createElement(ha.a,{start:0,end:n})))))}),Ca=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={options:{labels:["Un-Employed","Employed","Part-Time","Self-Employed"],responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}]},series:[44,55,13,43,22],timeSeriesOptions:{chart:{stacked:!1,zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{line:{curve:"smooth"}},dataLabels:{enabled:!1},markers:{size:0,style:"full"},title:{text:"Community Posts Trends (Last 30 Days)",align:"left"},fill:{type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},yaxis:{min:0,labels:{formatter:function(e){return e.toFixed(0)}},title:{text:"Community Posts"}},xaxis:{type:"datetime"},tooltip:{shared:!1,y:{formatter:function(e){return(e/1e6).toFixed(0)}}}}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){"alumni"===this.props.user.role?this.props.push("/app/community"):(this.props.getDashboardStats(),this.props.getCommunityStats())}},{key:"render",value:function(){var e=this;console.log(this.props.communityStats);var t=[];if(this.props.stats.employmentStatus){var a=this.props.stats.employmentStatus,n=a.employed,i=a.partTime,l=a.selfEmployed;t=[a.unEmployed,n,i,l]}return r.a.createElement("div",{className:aa.a.container},r.a.createElement(ra.a,{gutter:{xs:8,sm:16,md:24,lg:32}},ka.map(function(t,a){return r.a.createElement(ia.a,{key:a,span:6,xs:24,sm:12,md:12,lg:6},r.a.createElement(Oa,{title:t.title,value:e.props.stats[t.key],icon:t.icon}))})),r.a.createElement(ra.a,{style:{padding:20},gutter:{xs:8,sm:16,md:24,lg:32}},r.a.createElement(ia.a,{span:6,md:24,lg:10},r.a.createElement("div",{style:{margin:40,textAlign:"center"}},r.a.createElement("h3",{style:{fontWeight:"bold"}},"Employment Status"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",{id:"chart"},r.a.createElement(Sa.a,{options:this.state.options,series:t,type:"pie",width:"380"}))))),r.a.createElement(ia.a,{span:6,md:24,lg:14},r.a.createElement("div",{id:"anotherChart"},r.a.createElement(Sa.a,{options:this.state.timeSeriesOptions,series:[{name:"Posts",data:this.props.communityStats}],type:"area",height:"350"})))))}}]),t}(n.Component),wa=Object(O.c)(function(e){return{stats:e.dashboard.stats,user:e.auth.user,communityStats:e.dashboard.communityStats}},function(e){return Object(k.b)({getDashboardStats:ya,getCommunityStats:Ea,push:S.d},e)})(Ca),Da=a(167),Pa=a.n(Da),_a=f.a.Search,Ta=se.a.confirm;function xa(e){var t=e.title,a=e.value;return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("span",{className:"title",style:{flex:1,color:"#001529"}},t,":"),r.a.createElement("span",{className:"value"},a||r.a.createElement(r.a.Fragment,null,"\u2013")))}var Aa=function(e){var t=e.text,a=(e.modalAction,e.onSearch),n=void 0===a?function(){}:a;return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px"}},r.a.createElement("h2",{style:{margin:0}},t),r.a.createElement("div",null,r.a.createElement(_a,{placeholder:"Search",onSearch:n,style:{width:200}})))},ja=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={selectedAlumni:null,loading:!0},a.handleVerify=function(){Ta({title:"Are you sure you want to verify this alumni?",okText:"Yes",okType:"primary",cancelText:"No",icon:r.a.createElement(h.a,{type:"done"}),onOk:function(){a.setState({loading:!0}),a.props.updateAlumni(a.state.selectedAlumni._id,"verified").then(function(){a.props.getAllPendingAlumni().then(function(){a.setState({loading:!1})})}),a.setState({selectedAlumni:null})},onCancel:function(){}})},a.handleReject=function(){Ta({title:"Are you sure you want to reject this alumni?",okText:"Yes",okType:"danger",cancelText:"No",icon:r.a.createElement(h.a,{type:"close"}),onOk:function(){a.setState({loading:!0}),a.props.updateAlumni(a.state.selectedAlumni._id,"rejected").then(function(){a.props.getAllPendingAlumni().then(function(){a.setState({loading:!1})})}),a.setState({selectedAlumni:null})},onCancel:function(){}})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;"alumni"===this.props.user.role?this.props.push("/app/community"):this.props.getAllPendingAlumni().then(function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:Pa.a.container},r.a.createElement(Le.a,{spinning:this.state.loading},r.a.createElement(Aa,{text:"Pending Alumni"}),r.a.createElement("div",{style:{padding:"10px 15px",display:"flex",flexWrap:"wrap",maxHeight:"calc(100% - 65px)",overflow:"auto"}},this.props.pendingAlumni.length?this.props.pendingAlumni.map(function(t){return r.a.createElement("div",{key:t._id,onClick:function(){return e.setState({selectedAlumni:Object(W.a)({},t)})},className:Pa.a.pendingAlumni},r.a.createElement("div",null,t.username),r.a.createElement("span",null,t.email))}):r.a.createElement("div",{style:{textAlign:"center",color:"#999",marginTop:80,flex:1}},"No Data")),r.a.createElement(se.a,{title:"Verify Alumni",visible:Boolean(this.state.selectedAlumni),onOk:this.handleVerify,okText:"Verify",destroyOnClose:!0,onCancel:function(){return e.setState({selectedAlumni:null})},centered:!0,footer:[r.a.createElement(v.a,{key:"back",onClick:function(){return e.setState({selectedAlumni:null})}},"Cancel"),r.a.createElement(v.a,{type:"danger",key:"reject",onClick:this.handleReject},"Reject"),r.a.createElement(v.a,{key:"submit",type:"primary",onClick:this.handleVerify},"Verify")]},this.state.selectedAlumni?r.a.createElement(r.a.Fragment,null,r.a.createElement(xa,{title:"Name",value:this.state.selectedAlumni.username}),r.a.createElement(xa,{title:"NIC No",value:this.state.selectedAlumni.nicNo}),r.a.createElement(xa,{title:"Enrollment No",value:this.state.selectedAlumni.enrollmentNo}),r.a.createElement(xa,{title:"Department",value:this.state.selectedAlumni.department?"".concat(this.state.selectedAlumni.department.initials,"-").concat(this.state.selectedAlumni.department.name).toUpperCase():void 0}),r.a.createElement(xa,{title:"Degree",value:this.state.selectedAlumni.degree})):null)))}}]),t}(n.Component),Na=[{path:"/app",name:"Dashboard",component:wa,exact:!0,strict:!0},{path:"/app/alumni",name:"Alumni",component:Te,exact:!0,strict:!0},{path:"/app/pending-alumni",name:"Pending Alumni",component:Object(O.c)(function(e){return{user:e.auth.user,pendingAlumni:e.alumni.pendingAlumni}},function(e){return Object(k.b)({getAllPendingAlumni:ke,push:S.d,updateAlumni:Oe},e)})(ja),exact:!0,strict:!0},{path:"/app/departments",name:"Departments",component:ut,exact:!0,strict:!0},{path:"/app/hods",name:"Head of Departments",component:Ge,exact:!0,strict:!0},{path:"/app/community",name:"Community",component:ea,exact:!0,strict:!0},{path:"/app/profile",name:"Profile",component:kt}],Ia=ie.a.Header,La=ie.a.Sider,Ua=ie.a.Content,Ba=le.b.Item,Ma=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={collapsed:!0,selected:window.location.pathname,codeVerifying:!1,verificationStatus:null,codeValue:"",codeVerificationModal:!1,pwdModal:!1,changePwdLoader:!1},a.toggle=function(){a.setState(function(e){return{collapsed:!e.collapsed}})},a.menu=r.a.createElement(le.b,null,r.a.createElement(Ba,{onClick:function(){return a.props.push("/app/profile")}},"Profile"),r.a.createElement(Ba,{onClick:function(){return a.setState({pwdModal:!0})}},"Reset Password"),r.a.createElement(Ba,{onClick:a.props.logout},"Log out")),a.verifyUserCode=function(){a.state.codeValue.trim()&&(a.setState({codeVerifying:!0}),a.props.verifyUserCode({id:a.props.currentUser._id,code:+a.state.codeValue}).then(function(){$.a.success("Congratulation! your email has been verified!"),a.setState({codeVerifying:!1,verificationStatus:"verified"}),setTimeout(function(){window.location.replace("/")},1500)},function(){$.a.error("Incorrect verification code."),a.setState({codeVerifying:!1,verificationStatus:null})}))},a.handleSubmit=function(e){a.setState({changePwdLoader:!0}),e.preventDefault(),a.props.form.validateFields(function(e,t){var n=t.pwd,r=t.newPwd,i=t.newPwdAgain;if(e)a.setState({changePwdLoader:!1});else{if(r!==i)return $.a.error("Password does not match!"),void a.setState({changePwdLoader:!1});a.props.changePassword({oldPassword:n,newPassword:r,token:localStorage.getItem("accessToken")}).then(function(){$.a.success("Password Updated Successfully!"),a.setState({changePwdLoader:!1,pwdModal:!1})},function(){$.a.error("Incorrect Password!"),a.setState({changePwdLoader:!1})})}})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.location.pathname.split("/"),a="/".concat(t[1],"/").concat(t[2]);t.length<3&&(a="/".concat(t[1]));var n=[];switch(this.props.currentUser.role){case"super-admin":n=fe;break;case"admin":case"HOD":n=pe;break;default:n=me}var i=this.props.form.getFieldDecorator;return r.a.createElement(ie.a,{style:{height:"100vh"}},r.a.createElement(La,{style:{position:"relative"},trigger:null,collapsible:!0,collapsed:this.state.collapsed},r.a.createElement("div",{className:"logo",style:{margin:"15px auto",width:"fit-content"}},r.a.createElement("img",{src:this.state.collapsed?b.a:ue.a,width:this.state.collapsed?60:150,alt:""})),r.a.createElement(le.b,{style:{marginTop:50},theme:"dark",mode:"inline",defaultSelectedKeys:[a],selectedKeys:[a],onSelect:function(t){var a=t.key;e.props.push(a),e.setState({selected:a})}},n.map(function(e){return r.a.createElement(Ba,{key:e.link},e.icon,r.a.createElement("span",null,e.title))})),r.a.createElement("span",{style:{position:"absolute",bottom:5,left:0,fontSize:12,color:"#ffffff68",textAlign:"center",width:"100%"}},"Powered by Cyphersofts")),r.a.createElement(ie.a,null,r.a.createElement(Ia,{style:{background:"#fff",padding:0,display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(h.a,{style:{margin:25,fontSize:15},className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle}),this.props.currentUser.verified?null:r.a.createElement("div",{style:{padding:"0px 20px",color:"#d13838",fontWeight:"bold",background:"#d1383826",letterSpacing:"0.2px"}},"Your email is not verified.",r.a.createElement("span",{style:{marginLeft:10,color:"#000",cursor:"pointer",textDecoration:"underline"},onClick:function(){return e.setState({codeVerificationModal:!0})}},"Verify now!")),this.props.currentUser?r.a.createElement(oe.a,{overlay:this.menu,placement:"bottomRight"},r.a.createElement("div",{style:{lineHeight:"initial",marginRight:25,cursor:"pointer"}},r.a.createElement("div",{style:{fontSize:16,fontWeight:"bold",textTransform:"capitalize"}},this.props.currentUser.username," (",this.props.currentUser.role,") \u25be"),r.a.createElement("span",{style:{fontSize:12}},this.props.currentUser.email),r.a.createElement("br",null))):null),r.a.createElement(Ua,null,r.a.createElement(Y.d,null,Na.map(function(e,t){return r.a.createElement(Y.b,Object.assign({key:t},e))})))),r.a.createElement(se.a,{title:"Email Verification",visible:this.state.codeVerificationModal,destroyOnClose:!0,onCancel:function(){return e.setState({codeVerificationModal:!1})},footer:null,centered:!0},r.a.createElement("div",{style:{fontWeight:"bold",textAlign:"center"}},"Check your email (",this.props.currentUser.email,") for verification code."),r.a.createElement("div",{style:{maxWidth:350,margin:"20px auto",display:"flex"}},r.a.createElement(f.a,{disabled:this.state.verifyingCode,value:this.state.codeValue,onChange:function(t){return e.setState({codeValue:t.target.value})},placeholder:"Enter Verification Code",type:"text",onPressEnter:this.verifyUserCode}),r.a.createElement(v.a,{onClick:this.verifyUserCode,disabled:"verified"===this.state.verificationStatus||this.state.codeVerifying,type:"primary",shape:"circle",icon:this.state.verificationStatus?"verified"===this.state.verificationStatus?"check":"arrow-right":this.state.codeVerifying?"loading":"arrow-right",style:{width:35,marginLeft:10,background:"verified"===this.state.verificationStatus?"green":void 0}})),r.a.createElement(v.a,{style:{margin:"auto",display:"block",width:"fit-content"},disabled:this.state.resendTimer,loading:this.state.resendEmailLoader,onClick:function(){e.setState({resendEmailLoader:!0}),e.props.resendUserCode({id:e.props.currentUser._id}).then(function(){$.a.success("Email sent successfully!"),e.setState({resendEmailLoader:!1})})}},"Resend Email ",r.a.createElement(h.a,{type:"arrow-right"}))),r.a.createElement(se.a,{title:"Reset Password",visible:this.state.pwdModal,onCancel:function(){e.setState({pwdModal:!1})},onOk:this.handleSubmit,okButtonProps:{loading:this.state.changePwdLoader},destroyOnClose:!0,centered:!0},r.a.createElement(p.a,{labelCol:{span:10},wrapperCol:{span:12}},r.a.createElement(p.a.Item,{label:"Current Password"},i("pwd",{rules:[{required:!0,message:"Current Password is required!"}]})(r.a.createElement(f.a,{type:"password"}))),r.a.createElement(p.a.Item,{label:"New Password"},i("newPwd",{rules:[{required:!0,message:"Password must be at least 8 character",min:8,max:16}]})(r.a.createElement(f.a,{type:"password"}))),r.a.createElement(p.a.Item,{label:"New Password Again"},i("newPwdAgain",{rules:[{required:!0,message:"Password must be at least 8 character",min:8,max:16}]})(r.a.createElement(f.a,{type:"password"}))))))}}]),t}(n.Component),Ha=Object(O.c)(function(e){return{currentUser:e.auth.user,location:e.router.location}},function(e){return Object(k.b)({push:S.d,verifyUserCode:M,resendUserCode:H,changePassword:B,logout:N},e)})(p.a.create({name:"reset-pwd"})(Ma)),Va=a(241),Ra=a.n(Va),Fa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={authLoader:!0},a.verifyMe=function(){T("user/me",null,"get").then(function(e){var t=e.data;a.props.setUserData(t.data.mongoDB[0]),a.setState({authLoader:!1}),a.signIn()},function(){a.signOut(),a.setState({authLoader:!1})})},a.NoPageFound=function(){return r.a.createElement("h1",null,"No Page Found")},a.signIn=function(){a.props.setAuthStatus(!0)},a.signOut=function(){a.props.logout()},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.verifyMe()}},{key:"render",value:function(){var e=this;return this.state.authLoader||"undecided"===this.props.isAuth?r.a.createElement("div",{className:"fullscreenLoader"},r.a.createElement("div",null,r.a.createElement("img",{src:Ra.a,alt:"",width:200}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:30}},r.a.createElement("div",{className:"dot-loader"}),r.a.createElement("div",{className:"dot-loader"}),r.a.createElement("div",{className:"dot-loader"})))):r.a.createElement(Y.d,null,r.a.createElement(re,{auth:this.props.isAuth,exact:!0,path:"/",component:function(){return r.a.createElement(z,{signedIn:e.signIn})}}),r.a.createElement(re,{auth:this.props.isAuth,exact:!0,path:"/register",component:ne}),r.a.createElement(K,{auth:this.props.isAuth,path:"/app",component:function(){return r.a.createElement(Ha,null)}}),r.a.createElement(K,{auth:this.props.isAuth,path:"*",component:this.NoPageFound}))}}]),t}(n.Component),za=Object(O.c)(function(e){return{isAuth:e.auth.authenticated}},function(e){return Object(k.b)({logout:N,setAuthStatus:j,setUserData:A},e)})(Fa),Ya=a(37),qa=a(242),Ka={token:"",user:null,authenticated:"undecided"};function Xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka,t=arguments.length>1?arguments[1]:void 0,a=t.data;switch(t.type){case x.SET_USER:return Object(W.a)({},e,{user:a});case x.SET_USER_TOKEN:return Object(W.a)({},e,{token:a});case x.SET_AUTH_STATUS:return Object(W.a)({},e,{authenticated:a});case"LOGOUT":return Object(W.a)({},Ka,{authenticated:!1});default:return e}}var Wa={allAlumni:[],pendingAlumni:[]},Ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case Ee:return Object(W.a)({},e,{allAlumni:n});case be:return Object(W.a)({},e,{pendingAlumni:n});case"logout":return Object(W.a)({},Wa);default:return e}},Ja={allDepartments:[]},Za=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ja,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case $e:return Object(W.a)({},e,{allDepartments:n});default:return e}},$a={currentUser:null},Qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case ft:return Object(W.a)({},e,{currentUser:n});default:return e}},en={stats:{alumni:0,admins:0,faculty:0,departs:0,postsCount:0},communityStats:null},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case ga:return Object(W.a)({},e,{stats:n});case va:return Object(W.a)({},e,{communityStats:n});case"logout":return Object(W.a)({},en);default:return e}},an={allPosts:[],allBroadcastedPosts:[],broadcastedPostsCount:0,postsCount:0};function nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,t=arguments.length>1?arguments[1]:void 0,a=t.data;switch(t.type){case Ft.SET_ALL_POSTS:return Object(W.a)({},e,{allPosts:a});case Ft.SET_POSTS_COUNT:return Object(W.a)({},e,{postsCount:a});case Ft.SET_BROADCASTED_POSTS_COUNT:return Object(W.a)({},e,{broadcastedPostsCount:a});case Ft.SET_BROADCASTED_POSTS:return Object(W.a)({},e,{allBroadcastedPosts:a});case"LOGOUT":return Object(W.a)({},an);default:return e}}var rn={allHOD:[]},ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case Ue:return Object(W.a)({},e,{allHOD:n});default:return e}},on=function(e){return Object(k.c)({auth:Xa,dashboard:tn,alumni:Ga,departments:Za,user:Qa,community:nn,hod:ln,router:Object(Ya.b)(e)})},sn=a(60),cn=a(210),un=sn.a();var dn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):k.d)(Object(k.a)(qa.a,Object(cn.a)(un)));return Object(k.e)(on(un),e,t)}();l.a.render(r.a.createElement(O.a,{store:dn},r.a.createElement(Ya.a,{history:un},r.a.createElement(za,null))),document.getElementById("root"))},49:function(e,t,a){e.exports={alumniProfile:"UserProfile_alumniProfile__Hmxvo",top:"UserProfile_top__3FHEM",backBtn:"UserProfile_backBtn__3QVb-",profileBanner:"UserProfile_profileBanner__3-62j",profileImg:"UserProfile_profileImg__DObzo",profileTopData:"UserProfile_profileTopData__1dCdg",personalDetails:"UserProfile_personalDetails__MFuCD",info:"UserProfile_info__7PoVt",infoItems:"UserProfile_infoItems__3H093"}},75:function(e,t,a){e.exports={post:"Post_post__31RiC",link:"Post_link__r-_8K",dropDown:"Post_dropDown__2qci2",dropDownBtn:"Post_dropDownBtn__2gCia",mainInfo:"Post_mainInfo__1YHuo",timeStamp:"Post_timeStamp__5pTcW",postData:"Post_postData__2JRv_",reactionContainer:"Post_reactionContainer__3Nz5o"}},83:function(e,t,a){e.exports=a.p+"static/media/logo.e95ed184.png"}},[[248,1,2]]]);
//# sourceMappingURL=main.1c321368.chunk.js.map